<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>鲁棒优化模型求解（Model implementation） - 鲁棒优化电子书 —— 运筹OR帷幄</title>
  

<meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes"/>

<meta name="MobileOptimized" content="width"/>
<meta name="HandheldFriendly" content="true"/>


<meta name="applicable-device" content="pc,mobile">

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="mobile-web-app-capable" content="yes">

<meta name="author" content="运筹OR帷幄" />
  <meta name="description" content="汤勤深，熊鹏 随着鲁棒优化方法的价值不断地被学界和业界发现，出现了越来越多的语言包支持鲁棒优化模型的直接求解。其中，有基于Julia的JuMP" />

  <meta name="keywords" content="Hugo, theme, jane" />






<meta name="generator" content="Hugo 0.89.4" />


<link rel="canonical" href="https://allenz-me.github.io/RoSite/post/8.%E9%B2%81%E6%A3%92%E4%BC%98%E5%8C%96%E6%A8%A1%E5%9E%8B%E6%B1%82%E8%A7%A3/" />





<link rel="icon" href="/RoSite/favicon.ico" />











<link rel="stylesheet" href="/RoSite/sass/jane.min.fa4b2b9f31b5c6d0b683db81157a9226e17b06e61911791ab547242a4a0556f2.css" integrity="sha256-&#43;ksrnzG1xtC2g9uBFXqSJuF7BuYZEXkatUckKkoFVvI=" media="screen" crossorigin="anonymous">





<meta property="og:title" content="鲁棒优化模型求解（Model implementation）" />
<meta property="og:description" content="汤勤深，熊鹏 随着鲁棒优化方法的价值不断地被学界和业界发现，出现了越来越多的语言包支持鲁棒优化模型的直接求解。其中，有基于Julia的JuMP" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://allenz-me.github.io/RoSite/post/8.%E9%B2%81%E6%A3%92%E4%BC%98%E5%8C%96%E6%A8%A1%E5%9E%8B%E6%B1%82%E8%A7%A3/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2022-01-02T00:00:00+00:00" />
<meta property="article:modified_time" content="2022-01-02T00:00:00+00:00" />

<meta itemprop="name" content="鲁棒优化模型求解（Model implementation）">
<meta itemprop="description" content="汤勤深，熊鹏 随着鲁棒优化方法的价值不断地被学界和业界发现，出现了越来越多的语言包支持鲁棒优化模型的直接求解。其中，有基于Julia的JuMP"><meta itemprop="datePublished" content="2022-01-02T00:00:00+00:00" />
<meta itemprop="dateModified" content="2022-01-02T00:00:00+00:00" />
<meta itemprop="wordCount" content="7020">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="鲁棒优化模型求解（Model implementation）"/>
<meta name="twitter:description" content="汤勤深，熊鹏 随着鲁棒优化方法的价值不断地被学界和业界发现，出现了越来越多的语言包支持鲁棒优化模型的直接求解。其中，有基于Julia的JuMP"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->




</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/RoSite/" class="logo">主页</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://allenz-me.github.io/RoSite/"></a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://allenz-me.github.io/RoSite/post/"></a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://allenz-me.github.io/RoSite/tags/"></a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://allenz-me.github.io/RoSite/categories/"></a>
          
        
      </li><li class="mobile-menu-item">
        
          
          
            <a class="menu-item-link" href="https://allenz-me.github.io/RoSite"></a>
          
        
      </li>
    

    
  </ul>
</nav>


  
    






  <link rel="stylesheet" href="/RoSite/lib/photoswipe/photoswipe.min.css" />
  <link rel="stylesheet" href="/RoSite/lib/photoswipe/default-skin/default-skin.min.css" />




<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>

  

  

  

  <header id="header" class="header container">
    <div class="logo-wrapper">
  <a href="/RoSite/" class="logo">
    
      主页
    
  </a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://allenz-me.github.io/RoSite/"></a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://allenz-me.github.io/RoSite/post/"></a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://allenz-me.github.io/RoSite/tags/"></a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://allenz-me.github.io/RoSite/categories/"></a>
          

        

      </li>
    
        <li class="menu-item">
        
          
          
            <a class="menu-item-link" href="https://allenz-me.github.io/RoSite"></a>
          

        

      </li>
    

    
    

    
  </ul>
</nav>

  </header>

  <div id="mobile-panel">
    <main id="main" class="main bg-llight">
      <div class="content-wrapper">
        <div id="content" class="content container">
          <article class="post bg-white">
    
    <header class="post-header">
      <h1 class="post-title">鲁棒优化模型求解（Model implementation）</h1>
      
      <div class="post-meta">
        <time datetime="2022-01-02" class="post-time">
          2022-01-02
        </time>
        
        <span class="more-meta"> 7020 words </span>
          <span class="more-meta"> 15 min read </span>

        
        

        
        
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Table of Contents</h2>
  <div class="post-toc-content">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#鲁棒模型在jumper上的实现implementation-on-jumper">鲁棒模型在JuMPeR上的实现（Implementation on JuMPeR）</a></li>
    <li><a href="#鲁棒优化在yalmip和cvx上的实现">鲁棒优化在YALMIP和CVX上的实现</a></li>
    <li><a href="#鲁棒模型在rsome上的实现">鲁棒模型在RSOME上的实现</a>
      <ul>
        <li><a href="#rsome建模求解的基本步骤">RSOME建模求解的基本步骤</a></li>
        <li><a href="#用rsome定义事件式分布模糊集合">用RSOME定义事件式分布模糊集合</a></li>
      </ul>
    </li>
    <li><a href="#用rsome定义事件式近似法则">用RSOME定义事件式近似法则</a></li>
  </ul>
</nav>
  </div>
</div>

    
    <div class="post-content">
      <p>汤勤深，熊鹏</p>
<p>随着鲁棒优化方法的价值不断地被学界和业界发现，出现了越来越多的语言包支持鲁棒优化模型的直接求解。其中，有基于Julia的JuMPeR <a href="https://epubs.siam.org/doi/abs/10.1137/15M1020575?journalCode=siread">(Dunning, Huchette, and Lubin, 2017)</a>，基于C语言的ROC <a href="https://pubsonline.informs.org/doi/10.1287/mnsc.2017.2952">(Bertsimas, Sim, and Zhang, 2019)</a>，基于Matlab的<a href="xprog.weebly.com">XProg</a>和YALMIP以及XProg的升级版RSOME。JUMPeR和YALMIP主要支持经典鲁棒优化模型，而ROC和RSOME既支持传统鲁棒优化模型也支持分布式鲁棒优化模型，并且还可以比较简洁地定义各种决策规则。在本章中，我们将简要介绍如何在JUMPeR和YALMIP上对鲁棒优化模型求解而着重介绍如何用RSOME求解不同形式的鲁棒优化模型。由于编码原因，本章代码块部分中的$\xi$由$xi$进行表示。</p>
<h2 id="鲁棒模型在jumper上的实现implementation-on-jumper">鲁棒模型在JuMPeR上的实现（Implementation on JuMPeR）</h2>
<p><a href="jumper.readthedocs.io/en/latest/jumper.html">JuMPeR</a>全称Robust Optimization with JuMP。是基于Julia中JuMP而开发的一个用来求解鲁棒优化模型的语言包。 <a href="julialang.org/">Julia</a>是一门免费和开源的编程语言，于2018年8月1日正式发布。</p>
<p>JuMPeR可以处理大部分的经典鲁棒优化问题：
$$
\begin{aligned}
\min \ &amp; g( \pmb x)\label{model::JuMPeR RO}\\\
\mathbf{s.t.}\ &amp;  f_i( \pmb x,\tilde{\pmb \xi}) \leq 0,, \forall \tilde{\pmb \xi} \in \mathcal{U}:= {\tilde{\pmb \xi} : h( \pmb \xi) \leq 0}, i \in [I],
\end{aligned}
$$
其中，在JuMPeR中，鲁棒优化模型不能包含以下几种情况：</p>
<ol>
<li>不能有二次项，也即不能有变量乘变量（$x\mbox{*}y$）,不确定项乘不确定项（$\tilde{xi}\mbox{*}\tilde{\varepsilon}$）。但是允许不确定项和变量相乘（$x\mbox{*}\tilde{\xi}$）。</li>
<li>目标函数中不能包含不确定项。如果有的话，通过引入辅助变量将其转为约束条件。
在有不确定性的约束中不支持<a href="julialang.org/blog/2017/08/dsl">宏（Macros）</a>，所以必须使用“addConstraint”。</li>
</ol>
<p>使用JuMPeR时，先用</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">    using JuMPeR
</code></pre></td></tr></table>
</div>
</div><p>申明调用JuMPeR，并且用</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">    m = RobustModel()
</code></pre></td></tr></table>
</div>
</div><p>来定义模型$m$。之后可以定义变量“@defVar()”、约束“addConstraint()”、不定集“@defUnc()”，或者设定目标函数“setObjective()”。举个栗子：</p>
<p><strong>示例1</strong>
考虑如下鲁棒优化问题：
$$
\begin{array}{rll}
\max\ &amp; x_1 + x_2&amp;\\\
\mathrm{s.t.}\ &amp; \xi_1x_1 + x_2 \leq 2 &amp; \xi_1 \in [0.3, 0.5]\\\
&amp; \xi_2x_1 + x_2 \leq 6 &amp; \xi_2 \in [0,2]\\\
&amp; x_1, x_2 \geq 0,&amp;
\end{array}
$$
其JuMPeR程序为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-julia" data-lang="julia">        <span class="c"># 调用JuMPeR</span>
        <span class="k">using</span> <span class="n">JuMPeR</span>
    
        <span class="c"># 定义鲁棒模型$m$</span>
        <span class="n">m</span> <span class="o">=</span> <span class="n">RobustModel</span><span class="p">()</span>
        
        <span class="c"># 定义决策变量$x_1, x_2$</span>
        <span class="nd">@defVar</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="o">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">)</span>
        
        <span class="c"># 定义不确定参数$\xi_1, \xi_2$</span>
        <span class="nd">@defUnc</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mf">0.3</span> <span class="o">&lt;=</span> <span class="o">\</span><span class="n">xi1</span> <span class="o">&lt;=</span> <span class="mf">0.5</span><span class="p">)</span>
        <span class="nd">@defUnc</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="mf">0.0</span> <span class="o">&lt;=</span> <span class="o">\</span><span class="n">xi2</span> <span class="o">&lt;=</span> <span class="mf">2.0</span><span class="p">)</span>
        
        <span class="c"># 设定目标函数</span>
        <span class="n">setObjective</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="ss">:Max</span><span class="p">,</span> <span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span>
        
        <span class="c"># 添加约束条件</span>
        <span class="n">addConstraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="o">\</span><span class="n">xi_1</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mf">2.0</span><span class="p">)</span>
        <span class="n">addConstraint</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="o">\</span><span class="n">xi_2</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="o">*</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mf">6.0</span><span class="p">)</span>
        
        <span class="c"># 求解鲁棒模型</span>
        <span class="n">status</span> <span class="o">=</span> <span class="n">solveRobust</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
        
        <span class="c"># 输出解</span>
        <span class="n">println</span><span class="p">(</span><span class="n">getValue</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span>  <span class="c"># = 2.6666</span>
        <span class="n">println</span><span class="p">(</span><span class="n">getValue</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="mi">2</span><span class="p">]))</span>  <span class="c"># = 0.6666</span>
</code></pre></td></tr></table>
</div>
</div><p>由此，可以看出，类似JuMPeR这种编程语言包，已经最大化地节约了编程时间。只要模型满足一定的条件（标准型），即可直接输入进行求解。然而，JuMPeR暂时只能对经典鲁棒优化问题求解。而对于分布鲁棒优化问题，则需要先手动求对偶，化成JuMPeR可以识别的形式之后才可直接编程求解。同样的，接下来要介绍的YALMIP也存在这个问题。不过，这些语言包，已经大大减少了编程时间。</p>
<h2 id="鲁棒优化在yalmip和cvx上的实现">鲁棒优化在YALMIP和CVX上的实现</h2>
<p>[YALMIP]](<a href="https://yalmip.github.io/">https://yalmip.github.io/</a>)和<a href="http://cvxr.com/cvx/">CVX</a>都是依托于MATLAB而建的优化语言包。旨在用最直观简洁的语言进行优化模型的编程和求解。其中，YAPMIP主要由林雪平大学（Linköping University）的Johan Löfberg教授，而CVX由斯坦福大学的Stephen P .Boyd和Michael C. Grant开发和维护。除YALMIP自有部分优化器外，二者主要都通过调用开源（比如：）或者商业优化器对模型进行求解。这两个优化语言包功能都非常强大，各有其长短。感兴趣的读者可以到官网<a href="https://yalmip.github.io/">https://yalmip.github.io/</a>和<a href="http://cvxr.com/cvx/">http://cvxr.com/cvx/</a>进行了解。现阶段，YALMIP支持经典鲁棒优化模型（当然模型本身必须是凸问题），而如果要用CVX得化成相应的LP，SOCP，或者SDP才能求解。在这一节中，我们主要介绍如何用YAPMIP这个语言包进行经典鲁棒模型的求解。</p>
<p>YALMIP可以直接处理以下鲁棒优化问题：
$$
\begin{aligned}
\min \max_{ \pmb \xi}\ &amp; g( \pmb x,\tilde{\pmb \xi}) \label{model::YALMIP RO} \\\
\mathbf{s.t.}\ &amp;  f_i( \pmb x,\tilde{\pmb \xi}) \leq 0,, \forall \tilde{\pmb \xi} \in \mathcal{U}:= {\tilde{\pmb \xi} : h(\tilde{\pmb \xi}) \leq 0}, i \in [I],
\end{aligned}
$$
其中，约束和不确定集$\mathcal{U}$需满足以下几种情况之一：</p>
<ol>
<li>给定$ \pmb x$，每一个约束（elementwise constraints）都仿射依赖于不确定变量$\tilde{\pmb \xi}$，并且不确定集为多面（polytopic）或者锥（Conic）集。</li>
<li>每一个约束都仿射依赖于$\tilde{\pmb \xi}$，并且$\tilde{\pmb \xi}$在一个范数球（Norm-ball, $p = 1,2, \infty$）。</li>
<li>约束条件为锥约束并且仿射依赖于$\tilde{\pmb \xi}$，而不确定集为多面集。</li>
</ol>
<p>另外YALMIP在还有某些特殊条件下适用。详情可参考<a href="https://yalmip.github.io/tutorial/robustoptimization/">https://yalmip.github.io/tutorial/robustoptimization/</a>。</p>
<p>YALMIP通过sdpvar来定义变量，uncertain来定义不确定集，optimize来进行问题求解（默认为最小化问题）。接下来，我们举两个简单的栗子来阐述如何在YALMIP上进行鲁棒优化模型的求解。</p>
<p><strong>示例2</strong> 考虑如下简单鲁棒优化问题：
$$
\begin{array}{rl}
\max &amp; x \\\
\mathbf{s.t.} &amp;  x + \xi \leq 1,, \forall \xi\in[-0.5, 0.5].
\end{array}
$$
此问题的YALMIP的程序如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">    sdpvar x \xi
    F = [x + \xi &lt;= 1];
    W = [-0.5 &lt;= \xi &lt;= 0.5, uncertain(w)];
    objective = -x;
    sol = optimize(F + W,objective)
</code></pre></td></tr></table>
</div>
</div><p>对于不确定集为锥的问题，亦可用类似的方法求解：</p>
<p><strong>示例3</strong> 考虑如下鲁棒锥优化问题：
$$
\begin{array}{rl}
\max &amp; x \\\
\mathbf{s.t.} &amp;  x + \tilde{\pmb \xi}^{\prime}  \pmb{1} \leq 1,, \forall \tilde{\pmb \xi}\in \mathcal{U}.
\end{array}
$$
其中 $\mathcal{U} = {\tilde{\pmb \xi}: |\tilde{\pmb \xi}|_2 \leq 1/\sqrt{2}}$。
此问题的YALMIP的程序如下：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback">    sdpvar x \xi(2,1)
    F = [x + sum(\xi) &lt;= 1];
    W = [norm(\xi) &lt;= 1/sqrt(2), uncertain(\xi)];
    objective = -x;
    sol = optimize(F + W,objective)
</code></pre></td></tr></table>
</div>
</div><h2 id="鲁棒模型在rsome上的实现">鲁棒模型在RSOME上的实现</h2>
<p><a href="https://sites.google.com/view/rsome">RSOME</a>全称Robust Stochastic Optimization Modeling Environment，是一个针对MATLAB的优化建模工具包，可以在Windows，macOS，以及Linux操作系统下运行。该软件工具包为用户提供了丰富便捷的语法环境，可以直观高效地处理各类优化模型，如经典的随机规划和鲁棒优化模型，以及分布鲁棒优化和鲁棒随机优化模型等。目前版本的RSOME内置了CPLEX 12.8 的求解器，并且可以根据用户需求调用GUROBI求解器。更多详情和下载资源请参考官网<a href="https://sites.google.com/view/rsome">https://sites.google.com/view/rsome</a>。</p>
<h3 id="rsome建模求解的基本步骤">RSOME建模求解的基本步骤</h3>
<p>RSOME工具包提供了灵活的函数和语法环境来定义各类优化模型。具体的建模和求解步骤如下：</p>
<ol>
<li>用rsome函数创建一个优化模型对象</li>
<li>为优化模型创建随机变量和决策变量</li>
<li>创建和定义模糊集合</li>
<li>定义动态决策的近似表达式</li>
<li>定义目标函数和约束条件</li>
<li>求解模型和返回最优解</li>
</ol>
<p>我们首先用一个简单的凸优化问题来演示使用RSOME工具包建模求解的基本步骤。
<strong>示例 4</strong>
<a href="https://pubsonline.informs.org/doi/abs/10.1287/opre.1030.0065?journalCode=opre">Bertsimas and Sim 2004</a>介绍了一个经典的投资组合优化（Portfolio optimization）问题：
$$
\begin{array}{rl}
\max &amp;\sum\limits_{i=1}^n p_i x_i - \phi\sum\limits_{i=1}^n\sigma_i^2 x_i^2  \\\
\text{s.t.} &amp;\sum\limits_{i=1}^n x_i = 1\\\
&amp;x_i \geq 0, \forall i = 1, 2, &hellip;, n
\end{array}
$$
这个模型考虑了$n=150$支股票。对第$i$支股票，回报率的期望是$p_i$，标准差是$\sigma_i$。我们用$x_i$定义决策变量代表每支股票的投资比例，并用参数$\phi=5$来平衡投资的回报期望和风险。这个投资组合优化问题可以写成下面的代码。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-matlab" data-lang="matlab">    <span class="c">%% 定义模型参数</span>
    <span class="n">n</span> <span class="p">=</span> <span class="mi">150</span><span class="p">;</span>                                    <span class="c">% 股票支数</span>
    <span class="n">p</span> <span class="p">=</span> <span class="mf">1.15</span> <span class="o">+</span> <span class="mf">0.05</span><span class="o">/</span><span class="mi">150</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="n">n</span><span class="p">)</span><span class="o">&#39;</span><span class="p">;</span>                 <span class="c">% 回报率期望</span>
    <span class="n">sigma</span> <span class="p">=</span> <span class="mf">0.05</span><span class="o">/</span><span class="mi">450</span><span class="o">*</span><span class="nb">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="o">*</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="n">n</span><span class="p">)</span><span class="o">&#39;</span><span class="p">);</span>    <span class="c">% 回报率标准差</span>
    <span class="n">phi</span> <span class="p">=</span> <span class="mi">5</span><span class="p">;</span>                                    <span class="c">% 平衡参数</span>
    
    <span class="c">%% 创建模型和决策变量</span>
    <span class="n">model</span> <span class="p">=</span> <span class="n">rsome</span><span class="p">(</span><span class="s">&#39;投资组合优化&#39;</span><span class="p">);</span>              <span class="c">% 创建一个模型model</span>
    <span class="n">x</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">decision</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>                      <span class="c">% 定义决策变量x</span>
    
    <span class="c">%% 定义目标函数和约束条件</span>
    <span class="n">model</span><span class="p">.</span><span class="n">max</span><span class="p">(</span><span class="n">p</span><span class="o">&#39;*</span><span class="n">x</span> <span class="o">-</span> <span class="n">phi</span><span class="o">*</span><span class="n">sumsqr</span><span class="p">(</span><span class="n">sigma</span><span class="o">.*</span><span class="n">x</span><span class="p">));</span>     <span class="c">% 最大化目标函数</span>
    <span class="n">model</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>                  <span class="c">% 定义约束条件 </span>
    <span class="n">model</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span><span class="p">=</span> <span class="mi">0</span><span class="p">);</span>                       <span class="c">% 定义变量边界</span>
    
    <span class="c">%% 求解模型和返回最优解</span>
    <span class="n">model</span><span class="p">.</span><span class="n">solve</span><span class="p">;</span>                                <span class="c">% 求解模型</span>
    <span class="n">obj</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">get</span><span class="p">;</span>                            <span class="c">% 最优目标值</span>
    <span class="n">X</span> <span class="p">=</span> <span class="n">x</span><span class="p">.</span><span class="n">get</span>                                   <span class="c">% x的最优解</span>
</code></pre></td></tr></table>
</div>
</div><p>这个投资组合优化模型被转化成一个二阶锥规划问题并由内置的CPLEX求解器求解，得到的最优值是 $1.170$。在建模和求解过程中，我们提醒读者注意：</p>
<ol>
<li>就像MATLAB中的其他程序应用，RSOME工具包在处理向量和矩阵时的效率会远远高于循环。因此在这个例子中，我们把决策变量$x_i$创建成一个向量$ \pmb{x}$，并用矩阵运算来定义目标函数和约束条件。</li>
<li>MATLAB中的绝大部分矩阵运算符号和法则也适用于RSOME模型的表达式。同样的，我们也需要保证运算中的矩阵形状匹配。</li>
<li>RSOME工具包提供了一系列凸函数，比如绝对值$\texttt{abs}$，范数$\texttt{norm}$，和这个示例中的平方和$\texttt{sumsqr}$等。在模型中使用凸函数时，必须保证该模型符合凸优化的定义，否则程序会出现错误信息。
{example}</li>
</ol>
<h3 id="用rsome定义事件式分布模糊集合">用RSOME定义事件式分布模糊集合</h3>
<p>RSOME利用在\ref{RSO}中介绍的事件式分布模糊集合$\eqref{eventwise_as}$来表达随机变量的概率分布情况。和之前介绍的软件工具相比，这个事件式分布模糊集合更加的通用，因此我们可以使用RSOME方便地建立各类鲁棒优化和随机规划的模型，比如下面的例子。
<strong>示例5</strong>
<a href="https://pubsonline.informs.org/doi/abs/10.1287/opre.1030.0065?journalCode=opre">Bertsimas and Sim 2004</a>介绍的投资组合优化（Portfolio optimization）问题可以写成一个经典鲁棒优化模型：
$$
\begin{array}{rl}
\max&amp;\displaystyle \min_{\tilde{\pmb \xi}\in\mathcal{U}}\sum_{i=1}^n(p_i - \sigma_i\tilde{\xi}_i)x_i  \\\
\text{s.t.} &amp;\sum_{i=1}^n x_i = 1\\\
&amp;x_i \geq 0, \forall i = 1, 2, &hellip;, n
\end{array}
$$
在该模型中，随机变量$\tilde{\pmb \xi}$代表实际股票回报率和期望值间的偏差。这个随机被约束在一个预算不确定集（budget uncertainty set）$\mathcal{U}$中，其表达式如下：
$$
\begin{align}
\mathcal{U} = \left\{\tilde{\pmb \xi}||\tilde{\pmb \xi}|_{\infty}\leq 1, |\tilde{\pmb \xi}|_1\leq \Gamma\right\}
\end{align}
$$
其中$\Gamma$代表不确定性预算（budget of uncertainty）。以上的预算不确定集可以用事件式分布模糊集合中的支撑集合来表示，这个经典鲁棒优化模型因而由以下代码建立。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-matlab" data-lang="matlab">    <span class="c">%% 定义模型参数</span>
    <span class="n">n</span> <span class="p">=</span> <span class="mi">150</span><span class="p">;</span>                                    <span class="c">% 股票支数</span>
    <span class="n">p</span> <span class="p">=</span> <span class="mf">1.15</span> <span class="o">+</span> <span class="mf">0.05</span><span class="o">/</span><span class="mi">150</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="n">n</span><span class="p">)</span><span class="o">&#39;</span><span class="p">;</span>                 <span class="c">% 回报率期望</span>
    <span class="n">sigma</span> <span class="p">=</span> <span class="mf">0.05</span><span class="o">/</span><span class="mi">450</span><span class="o">*</span><span class="nb">sqrt</span><span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">n</span><span class="o">*</span><span class="p">(</span><span class="n">n</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1</span><span class="p">:</span><span class="n">n</span><span class="p">)</span><span class="o">&#39;</span><span class="p">);</span>    <span class="c">% 回报率标准差</span>
    <span class="nb">gamma</span> <span class="p">=</span> <span class="mi">5</span><span class="p">;</span>                                  <span class="c">% 不确定性预算</span>
    
    <span class="c">%% 创建模型，随机变量和决策变量</span>
    <span class="n">model</span> <span class="p">=</span> <span class="n">rsome</span><span class="p">(</span><span class="s">&#39;投资组合鲁棒优化&#39;</span><span class="p">);</span>          <span class="c">% 创建一个模型model</span>
    <span class="o">\</span><span class="n">xi</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">random</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>                      <span class="c">% 定义随机变量z</span>
    <span class="n">x</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">decision</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>                      <span class="c">% 定义决策变量x</span>
    
    <span class="c">%% 创建和定义分布模糊集合</span>
    <span class="n">P</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">ambiguity</span><span class="p">;</span>                        <span class="c">% 创建分布模糊集合</span>
    <span class="n">P</span><span class="p">.</span><span class="n">suppset</span><span class="p">(</span><span class="n">norm</span><span class="p">(</span><span class="o">\</span><span class="n">xi</span><span class="p">,</span> <span class="n">Inf</span><span class="p">)</span> <span class="o">&lt;</span><span class="p">=</span> <span class="mi">1</span><span class="p">,</span> <span class="c">...</span>
              <span class="n">norm</span><span class="p">(</span><span class="o">\</span><span class="n">xi</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">&lt;</span><span class="p">=</span> <span class="n">Gamma</span><span class="p">);</span>           <span class="c">% 定义支撑集信息</span>
    <span class="n">model</span><span class="p">.</span><span class="n">with</span><span class="p">(</span><span class="n">P</span><span class="p">);</span>                              <span class="c">% 传递模糊信息到模型</span>
    
    <span class="c">%% 定义目标函数和约束条件</span>
    <span class="n">model</span><span class="p">.</span><span class="n">max</span><span class="p">((</span><span class="n">p</span> <span class="o">+</span> <span class="n">sigma</span><span class="o">.*\</span><span class="n">xi</span><span class="p">)</span><span class="o">&#39;</span> <span class="o">*</span> <span class="n">x</span><span class="p">);</span>           <span class="c">% 最大化目标函数</span>
    <span class="n">model</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">sum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">);</span>                  <span class="c">% 定义约束条件 </span>
    <span class="n">model</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span><span class="p">=</span> <span class="mi">0</span><span class="p">);</span>                       <span class="c">% 定义变量边界</span>
    
    <span class="c">%% 求解模型</span>
    <span class="n">model</span><span class="p">.</span><span class="n">solve</span><span class="p">;</span>                                <span class="c">% 求解模型</span>
</code></pre></td></tr></table>
</div>
</div><p>在这个例子中，模型目标是最大化最坏情况下的(p + sigma.*$\xi$)'* x， 其中随机变量$\xi$被约束在一个多面（polyhedral）支撑集中。在只有支撑集信息被定义的情况下，该模型等价于一个经典的鲁棒优化问题。RSOME工具包帮助用户将这个鲁棒优化模型自动转化为一个线性规划标准型，并通过求解器求解，得到的最优值是$1.1771$。
example}</p>
<p><strong>示例6</strong> {example} \label{newsvendor_example}
<a href="https://pubsonline.informs.org/doi/abs/10.1287/mnsc.2020.3603">Chen, Sim, and Xiong, 2020</a>介绍的报童问题可以写成以下分布鲁棒优化模型：
$$
\begin{array}{rl}
\max&amp;(p - c)\cdot x - \sup\limits_{\mathbb{P}\in\mathcal{F}}\mathbb{E}_{\mathbb{P}}[\max\left\{p\cdot(x - z), 0\right\}] \\\
\text{s.t.} &amp;x \geq 0
\end{array}
$$
其中参数$p$和$c$分别是产品的销售价格和预定价格，决策变量$x$代表商品的预定量，随机变量$z$代表商品的需求。随机变量$z$的分布由一个基于Wasserstein距离的分布模糊集（Wasserstein ambiguity set）刻画。<a href="https://pubsonline.informs.org/doi/abs/10.1287/mnsc.2020.3603">Chen, Sim, and Xiong, 2020</a>证明了这个模糊集可以写成:
$$
\mathcal{F} = \left\{\mathbb{P} \in \mathcal{P}_0\left(\mathbb{R} \times [S]\right) \left\vert
\begin{array}{ll}
(\tilde{z},\tilde{s}) \sim \mathbb{P} &amp; \\\
\mathbb{E}_{\mathbb{P}}[\rho(\tilde{z}, \hat{z}_{\tilde{s}}) \mid \tilde{s} \in [S]] \leq \theta &amp;\\\
\mathbb{P}[\tilde{z} \in [0, \bar{Z}] \mid \tilde{s} = s]  = 1 &amp;\forall s \in [S]  \\\
\mathbb{P}[\tilde{s} = s]  = 1/S &amp; \forall s \in [S]  \\\
\end{array}
\right.
\right\}
$$
其中$\bar{Z}$是商品需求的上限， 而$\hat{z}_{s}$, $s=1, 2, 3, &hellip;, S$代表随机变量$z$的历史经验数据（Empirical data）。这个模糊集定义了所有和经验数据的Wasserstein距离不大于常数$\theta$的所有分布函数，并且可以写成下面的事件式分布模糊集：
$$
\mathcal{G} = \left\{\mathbb{P} \in \mathcal{P}_0\left(\mathbb{R}^2 \times [S]\right)  \left\vert
\begin{array}{ll}
(\tilde{z}, \tilde{u}),\tilde{s}) \sim \mathbb{P} &amp; \label{wass_as} \\\
\mathbb{E}_{\mathbb{P}}[\tilde{u} \mid \tilde{s} \in [S]] \leq \theta &amp;\\\
\mathbb{P}[\tilde{z} \in [0, \bar{Z}], \rho(\tilde{z}, \hat{z}_{\tilde{s}})\leq \tilde{u} \mid \tilde{s} = s]  = 1 &amp; \forall s \in [S]  \\\
\mathbb{P}[\tilde{s} = s]  = 1/S &amp; \forall s \in [S]  \\\
\end{array}
\right.
\right\}
$$
基于上面的事件式分布模糊集，这个报童问题可以写成下面的RSOME程序。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-matlab" data-lang="matlab">    <span class="c">%% 定义模型参数</span>
    <span class="n">Zbar</span> <span class="p">=</span> <span class="mi">100</span><span class="p">;</span>                             <span class="c">% 商品需求上限</span>
    <span class="n">S</span><span class="p">=</span><span class="mi">500</span><span class="p">;</span>                                  <span class="c">% 经验数据的数目</span>
    <span class="n">Zhat</span> <span class="p">=</span> <span class="n">Zbar</span> <span class="o">*</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">S</span><span class="p">);</span>               <span class="c">% 生成经验数据</span>
    <span class="n">p</span> <span class="p">=</span> <span class="mf">1.5</span><span class="p">;</span>                                <span class="c">% 销售价格</span>
    <span class="n">c</span> <span class="p">=</span> <span class="mf">1.0</span><span class="p">;</span>                                <span class="c">% 预定成本</span>
    <span class="n">theta</span> <span class="p">=</span> <span class="n">Zbar</span> <span class="o">*</span> <span class="mf">0.01</span><span class="p">;</span>                    <span class="c">% Wasserstein 距离</span>
    
    <span class="c">%% 创建模型，随机变量和决策变量</span>
    <span class="n">model</span> <span class="p">=</span> <span class="n">rsome</span><span class="p">(</span><span class="s">&#39;报童问题&#39;</span><span class="p">);</span>              <span class="c">% 创建一个模型model</span>
    <span class="n">z</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">random</span><span class="p">;</span>                       <span class="c">% 定义随机变量z</span>
    <span class="n">u</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">random</span><span class="p">;</span>                       <span class="c">% 定义辅助随机变量u</span>
    <span class="n">x</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">decision</span><span class="p">;</span>                     <span class="c">% 定义决策变量x</span>
    
    <span class="c">%% 创建和定义分布模糊集合</span>
    <span class="n">P</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">ambiguity</span><span class="p">(</span><span class="n">S</span><span class="p">);</span>                 <span class="c">% 创建S个情景的分布模糊集</span>
    <span class="k">for</span> <span class="n">s</span> <span class="p">=</span> <span class="mi">1</span><span class="p">:</span><span class="n">S</span>                                 
        <span class="n">P</span><span class="p">(</span><span class="n">s</span><span class="p">).</span><span class="n">suppset</span><span class="p">(</span><span class="mi">0</span> <span class="o">&lt;</span><span class="p">=</span> <span class="n">z</span><span class="p">,</span> <span class="n">z</span> <span class="o">&lt;</span><span class="p">=</span> <span class="n">Zbar</span><span class="p">,</span> <span class="c">...     </span>
                     <span class="n">norm</span><span class="p">(</span><span class="n">z</span><span class="o">-</span><span class="n">Zhat</span><span class="p">(</span><span class="n">s</span><span class="p">))</span> <span class="o">&lt;</span><span class="p">=</span> <span class="n">u</span><span class="p">);</span> <span class="c">% 定义每个情景s的支撑集</span>
    <span class="k">end</span>
    <span class="n">P</span><span class="p">.</span><span class="n">exptset</span><span class="p">(</span><span class="n">expect</span><span class="p">(</span><span class="n">u</span><span class="p">)</span> <span class="o">&lt;</span><span class="p">=</span> <span class="n">theta</span><span class="p">)</span>           <span class="c">% 定义整体的期望值信息</span>
    <span class="n">pr</span> <span class="p">=</span> <span class="n">P</span><span class="p">.</span><span class="n">prob</span><span class="p">;</span>                            <span class="c">% 每个情景s的概率</span>
    <span class="n">P</span><span class="p">.</span><span class="n">probset</span><span class="p">(</span><span class="n">pr</span> <span class="o">==</span> <span class="mi">1</span><span class="o">/</span><span class="n">S</span><span class="p">);</span>                   <span class="c">% 定义每个情景概率的值</span>
    <span class="n">model</span><span class="p">.</span><span class="n">with</span><span class="p">(</span><span class="n">P</span><span class="p">);</span>                          <span class="c">% 传递模糊信息到模型</span>
    
    <span class="c">%% 定义目标函数和约束条件</span>
    <span class="n">model</span><span class="p">.</span><span class="n">max</span><span class="p">((</span><span class="n">p</span><span class="o">-</span><span class="n">c</span><span class="p">)</span><span class="o">*</span><span class="n">x</span> <span class="o">-</span> <span class="c">...</span>
              <span class="n">expect</span><span class="p">(</span><span class="n">maxfun</span><span class="p">({</span><span class="n">p</span><span class="o">*</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">z</span><span class="p">),</span> <span class="mi">0</span><span class="p">})));</span><span class="c">% 最大化目标函数</span>
    <span class="n">model</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span><span class="p">=</span> <span class="mi">0</span><span class="p">);</span>                   <span class="c">% 定义变量边界</span>
    
    <span class="c">%% 求解模型</span>
    <span class="n">model</span><span class="p">.</span><span class="n">solve</span><span class="p">;</span>                            <span class="c">% 求解模型</span>
</code></pre></td></tr></table>
</div>
</div><p>请注意以上程序中的函数\texttt{expect()}代表了表达式的最坏期望。这个例子体现了RSOME工具包的优势：我们可以直观便捷地定义分布模糊集的各类概率分布信息，比如：</p>
<ol>
<li>我们用$\texttt{P(s).suppset()}$来分别定义每一个情景$\texttt{s}$下的支撑集；</li>
<li>函数$\texttt{P.exptset()}$定义随机变量期望值的集合表达式；</li>
<li>模糊集$\texttt{P}$的属性$\texttt{P.prob}$返回一个包含每个情景$\texttt{s}$概率的列向量，并且情景概率的集合可以通过$\texttt{P.probset()}$来定义。</li>
</ol>
<p>由此可见，RSOME代码有着更好的可读性和通用性。用户可以轻松地将模糊集合的数学表达式用程序表达出来，因此能够更快更方便地求解和调试各类鲁棒优化模型。
{example}</p>
<h2 id="用rsome定义事件式近似法则">用RSOME定义事件式近似法则</h2>
<p>再前文\ref{sp_intro}中，我们提到在多阶段问题（Multi-stage problems）中，一些决策变量可以根据未来观测到的一部分随机变量的值而动态变化。这类”等待决策（wait-and-see decisions)“可能给建模和求解带来巨大的困难。因此在\ref{RSO}中我们介绍了两种近似处理的方法：一是事件式静态近似法则，也就是在不同的事件下，决策取不同的常数值；另一种称为事件式线性近似法则，在该法则中，决策在不同的事件下为随机变量的不同仿射函数。在实际应用中，我们可以使用RSOME方便灵活地定义这两类近似法则。在定义各类近似法则中，用户可以设定：</p>
<ol>
<li>一个相互独立又完全穷尽（MECE）的事件集合，使得被定义的决策在不同的事件下动态变化。这样的事件适应（event-wise adaptation)集合可以通过函数$\texttt{evtadapt()}$来实现。</li>
<li>被定义的决策对随随机变量的仿射适应（affine adaptation）表达式。这个仿射适应表达式可以通过函数$\texttt{affadapt()}$来设定。</li>
</ol>
<p>接下来，我们用一个实际的例子来演示如何使用RSOME处理此类问题。</p>
<p><strong>示例7</strong> {example}
在之前的示例$\ref{newsvendor_example}$中，表达式$\max{p\cdot(x - z), 0}$可以用动态决策近似函数$y(\tilde{s},(\tilde{z}, \tilde{u}))$替代，由此之前的问题可以写成一个两阶段（Two-stage）模型如下：
$$
\begin{array}{rl}
\max &amp;(p - c)\cdot x - \sup\limits_{\mathbb{P}\in\mathcal{F}}\mathbb{E}_{\mathbb{P}}[y(\tilde{s}, (\tilde{z}, \tilde{u}))] \\\
\text{s.t.} &amp;x \geq 0 \\\
&amp; y(\tilde{s}, (\tilde{z}, \tilde{u})) \geq p\cdot(x - z) \\\
&amp; y(\tilde{s}, (\tilde{z}, \tilde{u})) \geq 0 \\\
&amp; y\in \bar{\mathcal{A}}([S], 2)
\end{array}
$$
其中$y\in \bar{\mathcal{A}}([S], 2)$意味着动态决策$y$在每一个情景$s\in[S]$下，都是不同的关于随机变量$z$和$u$的仿射函数。这样的一个两阶段模型可以用如下程序来表达。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-matlab" data-lang="matlab">    <span class="c">%% 定义模型参数</span>
    <span class="n">Zbar</span> <span class="p">=</span> <span class="mi">100</span><span class="p">;</span>                             <span class="c">% 商品需求上限</span>
    <span class="n">S</span><span class="p">=</span><span class="mi">500</span><span class="p">;</span>                                  <span class="c">% 经验数据的数目</span>
    <span class="n">Zhat</span> <span class="p">=</span> <span class="n">Zbar</span> <span class="o">*</span> <span class="nb">rand</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">S</span><span class="p">);</span>               <span class="c">% 生成经验数据</span>
    <span class="n">p</span> <span class="p">=</span> <span class="mf">1.5</span><span class="p">;</span>                                <span class="c">% 销售价格</span>
    <span class="n">c</span> <span class="p">=</span> <span class="mf">1.0</span><span class="p">;</span>                                <span class="c">% 预定成本</span>
    <span class="n">theta</span> <span class="p">=</span> <span class="n">Zbar</span> <span class="o">*</span> <span class="mf">0.01</span><span class="p">;</span>                    <span class="c">% Wasserstein 距离</span>
    
    <span class="c">%% 创建模型，随机变量和决策变量</span>
    <span class="n">model</span> <span class="p">=</span> <span class="n">rsome</span><span class="p">(</span><span class="s">&#39;报童问题&#39;</span><span class="p">);</span>              <span class="c">% 创建一个模型model</span>
    <span class="n">z</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">random</span><span class="p">;</span>                       <span class="c">% 定义随机变量z</span>
    <span class="n">u</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">random</span><span class="p">;</span>                       <span class="c">% 定义辅助随机变量u</span>
    <span class="n">x</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">decision</span><span class="p">;</span>                     <span class="c">% 定义决策变量x</span>
    <span class="n">y</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">decision</span><span class="p">;</span>                     <span class="c">% 定义动态决策变量y</span>
    
    <span class="c">%% 创建和定义分布模糊集合</span>
    <span class="n">P</span> <span class="p">=</span> <span class="n">model</span><span class="p">.</span><span class="n">ambiguity</span><span class="p">(</span><span class="n">S</span><span class="p">);</span>                 <span class="c">% 创建S个情景的分布模糊集</span>
    <span class="k">for</span> <span class="n">s</span> <span class="p">=</span> <span class="mi">1</span><span class="p">:</span><span class="n">S</span>                                 
        <span class="n">P</span><span class="p">(</span><span class="n">s</span><span class="p">).</span><span class="n">suppset</span><span class="p">(</span><span class="mi">0</span> <span class="o">&lt;</span><span class="p">=</span> <span class="n">z</span><span class="p">,</span> <span class="n">z</span> <span class="o">&lt;</span><span class="p">=</span> <span class="n">Zbar</span><span class="p">,</span> <span class="c">...     </span>
                     <span class="n">norm</span><span class="p">(</span><span class="n">z</span><span class="o">-</span><span class="n">Zhat</span><span class="p">(</span><span class="n">s</span><span class="p">))</span> <span class="o">&lt;</span><span class="p">=</span> <span class="n">u</span><span class="p">);</span> <span class="c">% 定义每个情景s的支撑集</span>
    <span class="k">end</span>
    <span class="n">P</span><span class="p">.</span><span class="n">exptset</span><span class="p">(</span><span class="n">expect</span><span class="p">(</span><span class="n">u</span><span class="p">)</span> <span class="o">&lt;</span><span class="p">=</span> <span class="n">theta</span><span class="p">)</span>           <span class="c">% 定义整体的期望值信息</span>
    <span class="n">pr</span> <span class="p">=</span> <span class="n">P</span><span class="p">.</span><span class="n">prob</span><span class="p">;</span>                            <span class="c">% 每个情景s的概率</span>
    <span class="n">P</span><span class="p">.</span><span class="n">probset</span><span class="p">(</span><span class="n">pr</span> <span class="o">==</span> <span class="mi">1</span><span class="o">/</span><span class="n">S</span><span class="p">);</span>                   <span class="c">% 定义每个情景概率的值</span>
    <span class="n">model</span><span class="p">.</span><span class="n">with</span><span class="p">(</span><span class="n">P</span><span class="p">);</span>                          <span class="c">% 传递模糊信息到模型</span>
    
    <span class="c">%% 定义动态决策的事件适应和仿射适应表达式</span>
    <span class="k">for</span> <span class="n">s</span> <span class="p">=</span> <span class="mi">1</span><span class="p">:</span><span class="n">S</span>
        <span class="n">y</span><span class="p">.</span><span class="n">evtadapt</span><span class="p">(</span><span class="n">s</span><span class="p">);</span>                      <span class="c">% y随不同的情景s变化</span>
    <span class="k">end</span>
    <span class="n">y</span><span class="p">.</span><span class="n">affadapt</span><span class="p">(</span><span class="n">z</span><span class="p">);</span>                          <span class="c">% y线性依赖随机变量z</span>
    <span class="n">y</span><span class="p">.</span><span class="n">affadapt</span><span class="p">(</span><span class="n">u</span><span class="p">);</span>                          <span class="c">% y线性依赖随机变量u</span>
    
    <span class="c">%% 定义目标函数和约束条件</span>
    <span class="n">model</span><span class="p">.</span><span class="n">max</span><span class="p">((</span><span class="n">p</span><span class="o">-</span><span class="n">c</span><span class="p">)</span><span class="o">*</span><span class="n">x</span> <span class="o">-</span> <span class="n">expect</span><span class="p">(</span><span class="n">y</span><span class="p">));</span>         <span class="c">% 最大化目标函数</span>
    <span class="n">model</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span> <span class="o">&gt;</span><span class="p">=</span> <span class="mi">0</span><span class="p">);</span>                   <span class="c">% 定义约束条件</span>
    <span class="n">model</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">y</span> <span class="o">&gt;</span><span class="p">=</span> <span class="n">p</span> <span class="o">*</span> <span class="p">(</span><span class="n">w</span><span class="o">-</span><span class="n">z</span><span class="p">));</span>           <span class="c">% 定义约束条件</span>
    <span class="n">model</span><span class="p">.</span><span class="n">append</span><span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span><span class="p">=</span> <span class="mi">0</span><span class="p">);</span>                   <span class="c">% 定义变量边界</span>
    
    <span class="c">%% 求解模型</span>
    <span class="n">model</span><span class="p">.</span><span class="n">solve</span><span class="p">;</span>                            <span class="c">% 求解模型</span>
</code></pre></td></tr></table>
</div>
</div><p>{example}
这一节主要介绍了RSOME优化建模工具包的基本概念和使用方法。从以上的示例中，我们可以看出，RSOME提供了一个简洁友好的建模环境，让用户可以通过近似数学表达式的程序语言定义复杂的模糊集合动态决策表达式，极大地提高了用户建立和求解各类鲁棒和随机优化模型的效率。关于RSOME工具包的更多细节可以参考官网<a href="https://sites.google.com/view/rsome">https://sites.google.com/view/rsome</a>。</p>

    </div>

    
    


    
    

    <footer class="post-footer">
      

      
      <nav class="post-nav">
        
          <a class="prev" href="/RoSite/post/7.%E9%B2%81%E6%A3%92%E4%BC%98%E5%8C%96%E4%B8%8E%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">
            
            <i class="iconfont">
              <svg  class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="18" height="18">
  <path d="M691.908486 949.511495l75.369571-89.491197c10.963703-12.998035 10.285251-32.864502-1.499144-44.378743L479.499795 515.267417 757.434875 204.940602c11.338233-12.190647 11.035334-32.285311-0.638543-44.850487l-80.46666-86.564541c-11.680017-12.583596-30.356378-12.893658-41.662889-0.716314L257.233596 494.235404c-11.332093 12.183484-11.041474 32.266891 0.657986 44.844348l80.46666 86.564541c1.772366 1.910513 3.706415 3.533476 5.750981 4.877077l306.620399 321.703933C662.505829 963.726242 680.945807 962.528973 691.908486 949.511495z"></path>
</svg>

            </i>
            <span class="prev-text nav-default">鲁棒优化与机器学习（Machine learning）</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        
      </nav>
    </footer>
  </article>

  
  

  
  

  

  
  

  

  

  

    

  

  <div id="remark42"></div>

        </div>
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="icon-links">
  
  
    <a href="mailto:operations_r@163.com" rel="me noopener" class="iconfont"
      title="email" >
      <svg class="icon" viewBox="0 0 1451 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M664.781909 681.472759 0 97.881301C0 3.997201 71.046997 0 71.046997 0L474.477909 0 961.649408 0 1361.641813 0C1361.641813 0 1432.688811 3.997201 1432.688811 97.881301L771.345323 681.472759C771.345323 681.472759 764.482731 685.154773 753.594283 688.65053L753.594283 688.664858C741.602731 693.493018 729.424896 695.068979 718.077952 694.839748 706.731093 695.068979 694.553173 693.493018 682.561621 688.664858L682.561621 688.65053C671.644501 685.140446 664.781909 681.472759 664.781909 681.472759L664.781909 681.472759ZM718.063616 811.603883C693.779541 811.016482 658.879232 802.205449 619.10784 767.734955 542.989056 701.759633 0 212.052267 0 212.052267L0 942.809523C0 942.809523 0 1024 83.726336 1024L682.532949 1024 753.579947 1024 1348.948139 1024C1432.688811 1024 1432.688811 942.809523 1432.688811 942.809523L1432.688811 212.052267C1432.688811 212.052267 893.138176 701.759633 817.019477 767.734955 777.248 802.205449 742.347691 811.03081 718.063616 811.603883L718.063616 811.603883Z"></path>
</svg>

    </a>
  
    <a href="https://github.com/Operations-Research-Science" rel="me noopener" class="iconfont"
      title="github"  target="_blank"
      >
      <svg class="icon" style="" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M512 12.672c-282.88 0-512 229.248-512 512 0 226.261333 146.688 418.133333 350.08 485.76 25.6 4.821333 34.986667-11.008 34.986667-24.618667 0-12.16-0.426667-44.373333-0.64-87.04-142.421333 30.890667-172.458667-68.693333-172.458667-68.693333C188.672 770.986667 155.008 755.2 155.008 755.2c-46.378667-31.744 3.584-31.104 3.584-31.104 51.413333 3.584 78.421333 52.736 78.421333 52.736 45.653333 78.293333 119.850667 55.68 149.12 42.581333 4.608-33.109333 17.792-55.68 32.426667-68.48-113.706667-12.8-233.216-56.832-233.216-253.013333 0-55.893333 19.84-101.546667 52.693333-137.386667-5.76-12.928-23.04-64.981333 4.48-135.509333 0 0 42.88-13.738667 140.8 52.48 40.96-11.392 84.48-17.024 128-17.28 43.52 0.256 87.04 5.888 128 17.28 97.28-66.218667 140.16-52.48 140.16-52.48 27.52 70.528 10.24 122.581333 5.12 135.509333 32.64 35.84 52.48 81.493333 52.48 137.386667 0 196.693333-119.68 240-233.6 252.586667 17.92 15.36 34.56 46.762667 34.56 94.72 0 68.522667-0.64 123.562667-0.64 140.202666 0 13.44 8.96 29.44 35.2 24.32C877.44 942.592 1024 750.592 1024 524.672c0-282.752-229.248-512-512-512"></path>
</svg>

    </a>
  
    <a href="https://www.zhihu.com/org/yun-chou-orwei-wo" rel="me noopener" class="iconfont"
      title="zhihu"  target="_blank"
      >
      <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="36" height="36">
  <path d="M351.791182 562.469462l192.945407 0c0-45.367257-21.3871-71.939449-21.3871-71.939449L355.897709 490.530013c3.977591-82.182744 7.541767-187.659007 8.816806-226.835262l159.282726 0c0 0-0.86367-67.402109-18.578124-67.402109s-279.979646 0-279.979646 0 16.850783-88.141456 39.318494-127.053698c0 0-83.60514-4.510734-112.121614 106.962104S81.344656 355.077018 76.80834 367.390461c-4.536316 12.313443 24.62791 5.832845 36.941354 0 12.313443-5.832845 68.050885-25.924439 84.252893-103.69571l86.570681 0c1.165546 49.28652 4.596691 200.335724 3.515057 226.835262L109.86113 490.530013c-25.275663 18.147312-33.701566 71.939449-33.701566 71.939449L279.868105 562.469462c-8.497535 56.255235-23.417339 128.763642-44.275389 167.210279-33.05279 60.921511-50.55235 116.65793-169.802314 212.576513 0 0-19.442818 14.257725 40.829917 9.073656 60.273758-5.185093 117.305683-20.739347 156.840094-99.807147 20.553105-41.107233 41.805128-93.250824 58.386782-146.138358l-0.055259 0.185218 167.855986 193.263655c0 0 22.035876-51.847855 5.832845-108.880803L371.045711 650.610918l-42.1244 31.157627-0.045025 0.151449c11.69946-41.020252 20.11206-81.5749 22.726607-116.858498C351.665315 564.212152 351.72876 563.345412 351.791182 562.469462z"></path>
  <path d="M584.918753 182.033893l0 668.840094 70.318532 0 28.807093 80.512708 121.875768-80.512708 153.600307 0L959.520453 182.033893 584.918753 182.033893zM887.150192 778.934538l-79.837326 0-99.578949 65.782216-23.537066-65.782216-24.855084 0L659.341766 256.673847l227.807403 0L887.149169 778.934538z"></path>
</svg>

    </a>
  
    <a href="https://space.bilibili.com/403058474" rel="me noopener" class="iconfont"
      title="bilibili"  target="_blank"
      >
      <svg
  class="icon" style="" viewBox="0 0 1024 1024" version="1.1" width="36"
  height="36" id="svg8">
  <path
      style=""
      d="M 744.60599,0.00486267 A 41.779915,41.779915 0 0 0 710.4184,18.673394 L 548.5048,255.32642 h -11.70046 a 41.779915,41.779915 0 0 0 -10.80295,-7.84928 L 235.66,97.084498 a 41.779915,41.779915 0 0 0 -20.07193,-4.960864 41.779915,41.779915 0 0 0 -18.3748,79.145436 L 359.4859,255.32642 H 128.16909 c -49.458302,0 -89.27932,39.82105 -89.27932,89.27932 v 508.65224 c 0,49.4583 39.821018,89.27934 89.27932,89.27934 h 19.48445 C 149.12802,984.5043 179.92773,1024 224.79179,1024 c 44.86407,0 75.66379,-39.4957 77.13826,-81.46268 H 719.98116 C 721.45559,984.5043 752.25533,1024 797.1194,1024 c 44.86406,0 75.6638,-39.4957 77.13824,-81.46268 h 21.57323 c 49.45831,0 89.27936,-39.82104 89.27936,-89.27934 V 344.60574 c 0,-49.45827 -39.82105,-89.27932 -89.27936,-89.27932 H 649.74567 L 779.38103,65.866924 A 41.779915,41.779915 0 0 0 744.60599,0.00486267 Z M 644.49108,418.70871 c 6.29985,0.21538 12.44451,2.01107 17.86888,5.22196 l 171.36218,98.10771 c 18.23417,10.21935 24.63334,33.34627 14.24614,51.48533 -10.38726,18.13909 -33.57344,24.32718 -51.61587,13.77296 L 624.9903,489.18895 c -15.21356,-8.41858 -22.66871,-26.1765 -18.03211,-42.93436 4.63664,-16.75784 20.15573,-28.14465 37.53289,-27.54588 z M 350.2006,432.31846 c 16.89952,0.0317 31.69582,11.33328 36.17844,27.62747 4.48262,16.2942 -2.44981,33.57765 -16.95507,42.24898 l -140.7157,86.91312 c -17.68528,11.18244 -41.09629,5.77692 -52.08912,-12.02686 -10.99282,-17.80373 -5.33855,-41.15658 12.58167,-51.95857 L 329.9002,438.2095 c 6.0643,-3.86439 13.10951,-5.90891 20.3004,-5.89104 z M 501.605,641.53985 c 3.75002,-0.15248 7.48645,0.53903 10.93349,2.0235 0.15842,0.0637 0.31618,0.12888 0.47325,0.19582 0.59328,0.27092 1.17574,0.56489 1.74609,0.88121 0.15868,0.0854 0.31643,0.17233 0.47325,0.2611 0.55694,0.32165 1.10131,0.66458 1.63185,1.02807 0.16455,0.1123 0.32777,0.2265 0.48956,0.34269 0.50382,0.36781 0.99371,0.75428 1.46868,1.15864 0.18724,0.15504 0.37218,0.31282 0.55484,0.47323 0.43271,0.38784 0.8518,0.79061 1.25653,1.20756 0.15449,0.16114 0.30679,0.32437 0.45693,0.48959 0.40798,0.44266 0.79989,0.89988 1.17494,1.37076 0.17799,0.22544 0.35205,0.45395 0.5222,0.68538 0.25932,0.34701 0.50964,0.70071 0.75064,1.06071 0.26712,0.39516 0.52286,0.79784 0.76699,1.20757 0.16907,0.29043 0.33231,0.58424 0.48957,0.88123 0.21836,0.41297 0.42513,0.83199 0.62009,1.25653 0.14836,0.32333 0.28983,0.64976 0.42429,0.97911 0.21319,0.51552 0.40915,1.03801 0.58747,1.5666 0.0677,0.19499 0.13296,0.39085 0.19582,0.58748 0.18652,0.60823 0.34984,1.22334 0.48957,1.84399 0.0397,0.16277 0.0779,0.32601 0.11423,0.48957 0.1436,0.69112 0.25788,1.38801 0.34269,2.08877 0.005,0.0381 0.0111,0.0761 0.0163,0.11424 0.0857,0.78056 0.13474,1.56471 0.14687,2.34988 0.005,0.0543 0.0111,0.10879 0.0163,0.1632 0,0 -0.008,1.12132 0,1.45234 0,0 -0.14697,17.84761 5.89102,34.12231 3.01902,8.13734 7.33278,15.10615 12.61433,19.61501 5.28157,4.50889 11.42894,7.62081 23.64572,7.62081 12.2168,0 18.36416,-3.11192 23.64573,-7.62081 5.28154,-4.50886 9.5953,-11.47767 12.6143,-19.61501 6.03799,-16.2747 5.89103,-34.12231 5.89103,-34.12231 -0.44885,-13.87045 10.45922,-25.46302 24.3311,-25.86506 13.87189,-0.40201 25.42828,10.53953 25.78348,24.41272 0,0 1.11929,25.7226 -9.00791,53.01927 -5.06359,13.64832 -13.1986,28.46036 -27.05631,40.29073 -13.85772,11.83039 -33.5454,19.63135 -56.20142,19.63135 -22.65603,0 -42.34371,-7.80096 -56.20141,-19.63135 -4.1801,-3.56856 -7.78733,-7.42433 -10.99878,-11.42303 -3.21235,4.00037 -6.81703,7.85309 -10.99876,11.42303 -13.85773,11.83039 -33.5454,19.63135 -56.20144,19.63135 -22.65601,0 -42.3437,-7.80096 -56.2014,-19.63135 -13.85775,-11.83037 -21.99272,-26.64241 -27.05632,-40.29073 -10.12725,-27.29667 -9.00789,-53.01928 -9.00789,-53.01927 0.20714,-13.83687 11.58744,-24.88848 25.42444,-24.69013 14.1263,0.19991 25.2971,12.0278 24.69011,26.14247 0,0 -0.14697,17.84761 5.89103,34.12231 3.01902,8.13734 7.31646,15.10615 12.598,19.61501 5.28155,4.50889 11.44526,7.62081 23.66203,7.62081 12.21681,0 18.36418,-3.11192 23.64573,-7.62081 5.28154,-4.50886 9.57899,-11.47767 12.598,-19.61501 5.76352,-15.53489 5.89112,-32.05691 5.89103,-33.56746 0.006,-0.37466 0.0111,-1.05336 0.0163,-1.20759 -0.0117,-0.74583 0.0105,-1.49177 0.0652,-2.23565 0.009,-0.15784 0.0204,-0.31561 0.0327,-0.47324 0.14204,-1.56859 0.43163,-3.12027 0.86487,-4.63449 0.0213,-0.0763 0.0433,-0.15244 0.0652,-0.22848 3.0335,-10.25748 12.24157,-17.46007 22.92769,-17.93417 z"
      id="rect824"/>
</svg>

    </a>


<a href="https://allenz-me.github.io/RoSite/index.xml" rel="noopener alternate" type="application/rss&#43;xml"
    class="iconfont" title="rss" target="_blank">
    <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="30" height="30">
  <path d="M819.157333 1024C819.157333 574.592 449.408 204.8 0 204.8V0c561.706667 0 1024 462.293333 1024 1024h-204.842667zM140.416 743.04a140.8 140.8 0 0 1 140.501333 140.586667A140.928 140.928 0 0 1 140.074667 1024C62.72 1024 0 961.109333 0 883.626667s62.933333-140.544 140.416-140.586667zM678.784 1024h-199.04c0-263.210667-216.533333-479.786667-479.744-479.786667V345.173333c372.352 0 678.784 306.517333 678.784 678.826667z"></path>
</svg>

  </a>
  
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - <a class="theme-link" href="https://github.com/xianmin/hugo-theme-jane">Jane</a>
  </span>

  <span class="copyright-year">
    &copy;
    
      2017 -
    2022
    <span class="heart">
      
      <i class="iconfont">
        <svg class="icon" viewBox="0 0 1025 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="14" height="14">
  <path d="M1000.1 247.9c-15.5-37.3-37.6-70.6-65.7-98.9-54.4-54.8-125.8-85-201-85-85.7 0-166 39-221.4 107.4C456.6 103 376.3 64 290.6 64c-75.1 0-146.5 30.4-201.1 85.6-28.2 28.5-50.4 61.9-65.8 99.3-16 38.8-24 79.9-23.6 122.2 0.7 91.7 40.1 177.2 108.1 234.8 3.1 2.6 6 5.1 8.9 7.8 14.9 13.4 58 52.8 112.6 102.7 93.5 85.5 209.9 191.9 257.5 234.2 7 6.1 15.8 9.5 24.9 9.5 9.2 0 18.1-3.4 24.9-9.5 34.5-30.7 105.8-95.9 181.4-165 74.2-67.8 150.9-138 195.8-178.2 69.5-57.9 109.6-144.4 109.9-237.3 0.1-42.5-8-83.6-24-122.2z"
   fill="#8a8a8a"></path>
</svg>

      </i>
    </span><span class="author">
        运筹OR帷幄
        
      </span></span>

  
  

  
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont">
        
        <svg class="icon" viewBox="0 0 1024 1024" version="1.1"
  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
  width="35" height="35">
  <path d="M510.866688 227.694839 95.449397 629.218702l235.761562 0-2.057869 328.796468 362.40389 0L691.55698 628.188232l241.942331-3.089361L510.866688 227.694839zM63.840492 63.962777l894.052392 0 0 131.813095L63.840492 195.775872 63.840492 63.962777 63.840492 63.962777zM63.840492 63.962777"></path>
</svg>

      </i>
    </div>
  </div>
  
<script type="text/javascript" src="/RoSite/lib/jquery/jquery-3.2.1.min.js"></script>
  <script type="text/javascript" src="/RoSite/lib/slideout/slideout-1.0.1.min.js"></script>




<script type="text/javascript" src="/RoSite/js/main.638251f4230630f0335d8c6748e53a96f94b72670920b60c09a56fdc8bece214.js" integrity="sha256-Y4JR9CMGMPAzXYxnSOU6lvlLcmcJILYMCaVv3Ivs4hQ=" crossorigin="anonymous"></script>












  
    <script type="text/javascript" src="/RoSite/js/load-photoswipe.js"></script>
    <script type="text/javascript" src="/RoSite/lib/photoswipe/photoswipe.min.js"></script>
    <script type="text/javascript" src="/RoSite/lib/photoswipe/photoswipe-ui-default.min.js"></script>
  











<script>
  var remark_config = {
    host: 'https:\/\/remark42.example.com',
    site_id: 'remark',
    components: [
	    'embed',
    ],
  }
  !function(e,n){for(var o=0;o<e.length;o++){var r=n.createElement("script"),c=".js",d=n.head||n.body;"noModule"in r?(r.type="module",c=".mjs"):r.async=!0,r.defer=!0,r.src=remark_config.host+"/web/"+e[o]+c,d.appendChild(r)}}(remark_config.components||["embed"],document);
</script>







<script>
  if (typeof MathJax === 'undefined') {
      window.MathJax = {
          loader: {
              load: ['[tex]/mhchem']
          },
          
          tex: {
              inlineMath: {'[+]': [['$', '$']]},
              tags: 'ams',
              packages: {'[+]': ['mhchem']}
          }
      };
      (function() {
          var script = document.createElement('script');
          script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.1.2/es5/tex-mml-chtml.js';
          script.defer = true;
          document.head.appendChild(script);
      })();
  } else {
      MathJax.texReset();
      MathJax.typeset();
  }
</script>

</body>
</html>
